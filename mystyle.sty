% General packages
\usepackage{graphicx}
\usepackage{afterpage}
\usepackage{mathtools}
%\usepackage{gensymb}
\usepackage{amsmath}
\usepackage{wrapfig}
\usepackage{subcaption}
\usepackage{multirow}
\usepackage{enumitem}
\usepackage{etoolbox}
\usepackage{lipsum}
\usepackage[table,xcdraw]{xcolor}
\usepackage{float}
\usepackage{etoolbox}% http://ctan.org/pkg/etoolbox

% Chapter titles
\usepackage{titlesec}
\titleformat{\chapter}{\LARGE\bf}{\thechapter}{20pt}{\LARGE\bf}
\titleformat{\chapter}{\LARGE\bf}{\thechapter}{20pt}{\LARGE\bf}
\titleformat*{\section}{\large\bfseries}
\titleformat*{\subsection}{\large\bfseries}
\titleformat*{\subsubsection}{\normalsize\bfseries}

\titlespacing*{\chapter}{0pt}{-50pt}{3pt}
\titlespacing*{\subsection}{0pt}{10pt}{5pt}
\titlespacing*{\section}{0pt}{15pt}{5pt}

% Include pdf pages
\usepackage[final]{pdfpages}

% Glossary
\usepackage[toc]{glossaries}
\newcommand{\glsf}[1]{\textit{\gls{#1}}}

% Titles
\renewcommand{\contentsname}{Table of contents}


% Reference / appendix
\usepackage[sorting=none, maxnames=1, style=authoryear, backend=biber,natbib]{biblatex}
\usepackage[toc,page]{appendix}
\addbibresource{references.bib}

% Hyperlinks
\usepackage[hidelinks]{hyperref}
\hypersetup{
    colorlinks=false,
    linkcolor=black,
    filecolor=magenta,      
    urlcolor=cyan,
    bookmarks=true,
}

% Images
\usepackage[export]{adjustbox}

% todo
\usepackage{todonotes}

% paths
\graphicspath{ {./img/}{./inkscape/}}

% Margins / dimensions
\usepackage[nodisplayskipstretch]{setspace}
\setstretch{1.5}
\usepackage[lmargin=25mm,rmargin=25mm,tmargin=27mm,bmargin=30mm]{geometry}

%spacing in matrices
\renewcommand{\arraystretch}{1.2}

%add text to equation reference
\let\oldref\eqref
\renewcommand{\eqref}[1]{Equation \oldref{#1}}

%\figref
\newcommand\figref{Figure~\ref}

% equation range
\usepackage{cleveref}

%algorithm
%\usepackage[boxed, algochapter]{algorithm2e}
%\SetAlCapSkip{1em}
%\newcommand\algref{Algorithm~\ref}
\usepackage{algorithm}
\usepackage{algpseudocode}

% listing
\usepackage{listings}
\usepackage{codeStyle}
\newcommand\liref{Listing~\ref}

% tables
\usepackage{booktabs}
\usepackage{tabularx}
\newcolumntype{Y}{>{\centering\arraybackslash}X}
\usepackage{rotating}
\usepackage{makecell}

% toc in bookmarks

\makeatletter
\pretocmd{\tableofcontents}{%
  \if@openright\cleardoublepage\else\clearpage\fi
  \pdfbookmark[0]{\contentsname}{toc}%
}{}{}%
\makeatother




%\setlength{\tabcolsep}{7pt}
%\renewcommand{\arraystretch}{1.5}
%\usepackage[table,xcdraw]{xcolor}
%\setlist[itemize]{topsep=8pt}
%\renewcommand{\baselinestretch}{1.5}
\usepackage[parfill]{parskip}

%\makeatletter
%% \patchcmd{<cmd>}{<search>}{<replace>}{<success>}{<failure>}
%% --- Patch \chapter
%\patchcmd{\@makechapterhead}{50\p@}{\chapheadtopskip}{}{}% Space from top of page to CHAPTER X
%\patchcmd{\@makechapterhead}{20\p@}{\chapheadsep}{}{}% Space between CHAPTER X and CHAPTER TITLE
%\patchcmd{\@makechapterhead}{40\p@}{\chapheadbelowskip}{}{}% Space between CHAPTER TITLE and text
%% --- Patch \chapter*
%\patchcmd{\@makeschapterhead}{50\p@}{\chapheadtopskip}{}{}% Space from top of page to CHAPTER TITLE
%\patchcmd{\@makeschapterhead}{40\p@}{\chapheadbelowskip}{}{}% SPace between CHAPTER TITLE and text
%\makeatother
%% Set new lengths
%\newlength{\chapheadtopskip}\setlength{\chapheadtopskip}{1pt}
%\newlength{\chapheadsep}\setlength{\chapheadsep}{1pt}
%\newlength{\chapheadbelowskip}\setlength{\chapheadbelowskip}{1pt}